[ditaa, onion_architecture]
....
+------------------------+
|   Presentation Layer   |
+------------------------+
           |
           V
   +---------------------------------------------------+
   |                   Domain model                    |
   +---------------------------------------------------+
                                        ^
                                        |
                               +-------------------+
                               |   Database Layer  |
                               +-------------------+
....

[ditaa, repository_pattern_diagram]
....
        +-----------------------------+
        |      Presentation Layer     |
        +-----------------------------+
           |                      |
           V                      |
+------------------+              |
|   Domain Model   |              |
+------------------+              |
     ^           ^                |
     |           |                V
     |        +----------------------+
     |        |      Repository      |
     |        +----------------------+
     |                      |
     |                      V
   +------------------------------+
   |        Database Layer        |
   +------------------------------+
....

[plantuml, chapter_02_class_diagram]
....
@startuml

package allocation {

  class BatchRepository {
    add (batch)
    get (reference)
    list ()
  }

  class Batch {
    allocate ()
  }


}

package SqlAlchemy {
  class Session {
    query ()
    add ()
  }

}

  BatchRepository *-- Session : abstracts >
  BatchRepository -> Batch : fetches >

@enduml
....
